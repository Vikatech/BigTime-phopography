if (self.CavalryLogger) { CavalryLogger.start_js(["96B9V"]); }

__d("ChooseLove",["cx","Arbiter","DOM","DOMVector","FeedbackReactionType","Random","Style","UFIUIEvents"],(function(a,b,c,d,e,f,g){__p&&__p();var h=null;function i(a){__p&&__p();var c=b("DOM").create("div",{className:"_7nz"}),d=b("DOM").create("div",{className:"_7n-"}),e=b("DOM").create("div",{className:"_7n_"});d.appendChild(e);c.appendChild(d);var f=parseInt(b("Random").random()*90-45,10),g=parseInt(b("Random").random()*250+150,10),h=b("Random").random()+.25;a=a/100+.25;b("Style").set(c,"transform","rotate("+f+"deg)");b("Style").set(d,"transition-duration",a+"s");a=function(){b("Style").set(c,"transform","rotate("+f+"deg) translateY("+-g+"px)"),b("Style").set(d,"transform","scale(0)"),b("Style").set(e,"transform","scale("+h+")")};return[c,a]}var j=function(a,c){__p&&__p();if(c.reaction_type!=b("FeedbackReactionType").LOVE)return;a=b("DOMVector").getElementPosition(c.target);c=b("DOMVector").getElementDimensions(c.target);var d=b("DOM").create("div"),e=[];for(var f=0;f<50;f++){var g=i(f);d.appendChild(g[0]);e.push(g[1])}g=a.add(c.div(2));var h=b("DOM").create("div",{className:"_lqb",style:"left: "+(g.x-24)+"px;top: "+(g.y-14)+"px"},[d]);document.body.appendChild(h);setTimeout(function(){while(e.length)e.shift()();setTimeout(function(){b("DOM").remove(h)},2125)},0)};a={enableExplosions:function(){if(h)return;h=b("Arbiter").subscribe(b("UFIUIEvents").ReactionButtonClicked,j)},disableExplosions:function(){h&&h.unsubscribe(),h=null}};e.exports=a}),null);
__d("UFIReactionsDialogLayerImpl.react",["cx","csx","invariant","BrowserSupport","ChooseLove","CSS","DataStore","DOM","DOMQuery","Focus","Layer","Locale","Parent","React","ReactDOM","ReactTransitionEvents","RTLKeys","Style","SubscriptionsHandler","TabbableElements","UFIConfig","Vector","ViewportBounds","ge","getElementPosition","getOverlayZIndex","memoize","renderSubtreeIntoContainer","requestAnimationFrame"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j,k;c=b("React").PropTypes;var l="_1oxh",m="_2r6k",n="_2r6j",o=b("BrowserSupport").hasCSSAnimations(),p="_22uo",q="_6fqy",r=200,s={};j=babelHelpers.inherits(t,b("Layer"));j&&j.prototype;t.prototype.updatePosition=function(){"use strict";__p&&__p();var a=this.getInsertParent(),c=this.getCausalElement(),d=b("Vector").getElementPosition(c),e=b("Vector").getElementPosition(a);d=d.sub(e);e=b("Vector").getElementDimensions(a).x;b("Locale").isRTL()&&(d.x=e-d.x);e=b("Vector").getViewportDimensions().x;var f=b("Vector").getElementDimensions(this.getContentRoot()).x;d.x=Math.min(d.x,e-f);b("Locale").isRTL()?s.right=d.x+"px":s.left=d.x+"px";s.top=d.y+"px";s.zIndex=this._getZIndex(c,a);e=this.getRoot();e!=null||i(0,4781);b("Style").apply(e,s);return!0};t.prototype._getZIndex=function(a,c){"use strict";__p&&__p();a=b("getOverlayZIndex")(a,c);c=b("Parent").byClass(c,"fbPhotoSnowliftContainer");var d=c&&b("DOMQuery").scry(c,".stageWrapper")[0];d&&(a=Math.max(a,b("getOverlayZIndex")(d,c)));d=b("ge")("pagelet_sidebar");if(d){c=b("DOMQuery").scry(d,".fbChatSidebar")[0];c&&(a=Math.max(a,parseInt(b("Style").get(c,"z-index"),10)+1))}return a};t.prototype.getContentRoot=function(){"use strict";return this.contentRoot};t.prototype._buildWrapper=function(a,c){"use strict";b("CSS").addClass(c,"_49v-");this.contentRoot=c;b("UFIConfig").showChooseLoveAnimation&&b("ChooseLove").enableExplosions();a=document.createElement("div");b("CSS").addClass(a,"_1oxj");a.appendChild(c);return a};function t(){"use strict";j.apply(this,arguments)}d=babelHelpers.inherits(a,b("React").Component);k=d&&d.prototype;function a(a,c){"use strict";__p&&__p();k.constructor.call(this,a,c),this.onTransitionHide=function(){b("ReactTransitionEvents").removeEndEventListener(this.layer.getContentRoot(),this.onTransitionHide),this.finishHide()}.bind(this),this.onTransitionShow=function(){var a=this.layer.getContentRoot();a!=null||i(0,4782);b("ReactTransitionEvents").removeEndEventListener(a,this.onTransitionShow);b("requestAnimationFrame")(function(){b("CSS").removeClass(a,n)})}.bind(this),this.onKeyDown=function(event){__p&&__p();var a=event.keyCode;if(this.props.isScreenReader)return;if(a===b("RTLKeys").ESC||a===b("RTLKeys").RETURN||a===b("RTLKeys").TAB){this.props.onLayerBlur&&this.props.onLayerBlur(event);var c=b("ReactDOM").findDOMNode(this.refs.root),d=b("TabbableElements").find(this.getContextualLayerParent()),e=null,f=[];a=a===b("RTLKeys").TAB&&event.shiftKey;for(var g=0;g<d.length;g++)if(d[g].tabIndex>-1){if(c.compareDocumentPosition(d[g])&4){e=d[g];break}a&&f.push(d[g])}f.length&&(e=f[f.length-1]);e&&(b("Focus").set(e),event.preventDefault(),event.stopPropagation())}}.bind(this),this.getGlobalContainer=b("memoize")(function(){return b("ge")("globalContainer")}),this.onParentLayerHide=this.finishHide.bind(this)}a.prototype.componentDidMount=function(){"use strict";var a=b("ReactDOM").findDOMNode(this.refs.root);this.layer=new t({causalElement:a,insertParent:a},document.createElement("div"));b("DOM").appendContent(a,this.layer.getRoot());this.handler=new(b("SubscriptionsHandler"))();this.props.onLayerBlur&&this.handler.addSubscriptions(this.layer.subscribe("blur",this.props.onLayerBlur));this.handler.addSubscriptions(this.layer.subscribe("beforeshow",this.beforeShow.bind(this)),this.layer.subscribe("aftershow",this.afterShow.bind(this)),this.layer.subscribe("starthide",this.startHide.bind(this)));this.isInDocument()&&this.renderLayer()};a.prototype.componentDidUpdate=function(a){"use strict";this.renderLayer()};a.prototype.componentWillUnmount=function(){"use strict";__p&&__p();if(this.layer){var a=this.layer.getContentRoot();b("ReactDOM").unmountComponentAtNode(this.layer.getContentRoot());b("ReactTransitionEvents").removeEndEventListener(a,this.onTransitionHide);b("ReactTransitionEvents").removeEndEventListener(a,this.onTransitionShow);this.handler.release();this.handler=null;this.layer.destroy();this.layer=null}};a.prototype.isInDocument=function(){"use strict";var a=b("ReactDOM").findDOMNode(this.refs.root);return a&&document.body.contains(a)};a.prototype.afterShow=function(){"use strict";__p&&__p();b("CSS").removeClass(this.refs.root,"accessible_elem");var a=this.layer.getContentRoot();a!=null||i(0,4783);var c=b("getElementPosition")(a).y,d=b("ViewportBounds").getTop();b("CSS").conditionClass(a,l,c&&c<d);o&&(b("ReactTransitionEvents").addEndEventListener(a,this.onTransitionShow),b("CSS").addClass(a,p),b("CSS").addClass(a,q),b("CSS").addClass(a,n),setTimeout(function(){this.props.setAnimatingDock(!1),b("CSS").removeClass(a,q)}.bind(this),r));c=b("TabbableElements").find(a)[0];c&&c.focus()};a.prototype.beforeShow=function(){"use strict";o&&this.props.setAnimatingDock(!0);var a=this.getContextualLayerParent();this.props.isScreenReader?this.layer.setInsertParent(this.layer.getCausalElement()):a!==this.layer.getInsertParent()&&(this.layer.setInsertParent(a),this.setParentLayerSubscription(a))};a.prototype.setParentLayerSubscription=function(a){"use strict";__p&&__p();if(a!==this.getGlobalContainer()){this.parentLayerSubscription&&this.parentLayerSubscription.unsubscribe();this.parentLayer=null;return}a=a;var c=null;while(a!==null){c=b("DataStore").get(a,"layer");if(c)break;a=a.parentNode}c&&c!==this.parentLayer&&(this.parentLayerSubscription&&this.parentLayerSubscription.unsubscribe(),this.parentLayerSubscription=c.subscribe("hide",this.onParentLayerHide),this.parentLayer=c)};a.prototype.startHide=function(){"use strict";if(o&&this.isInDocument()){var a=this.layer.getContentRoot();a!=null||i(0,4784);b("ReactTransitionEvents").addEndEventListener(a,this.onTransitionHide);b("CSS").addClass(a,m)}else this.finishHide();return!1};a.prototype.finishHide=function(){"use strict";b("CSS").addClass(this.refs.root,"accessible_elem");var a=this.layer.getContentRoot();a!=null||i(0,4785);o&&(b("CSS").removeClass(a,l),b("CSS").removeClass(a,m),b("CSS").removeClass(a,p));this.layer.setInsertParent(this.layer.getCausalElement());this.layer.finishHide()};a.prototype.getContextualLayerParent=function(){"use strict";var a=b("ReactDOM").findDOMNode(this.refs.root);if(a instanceof Element){a=b("Parent").byClass(a,"uiContextualLayerParent");if(a instanceof HTMLElement)return a}return document.body};a.prototype.renderLayer=function(){"use strict";b("renderSubtreeIntoContainer")(this,b("React").createElement("div",babelHelpers["extends"]({},this.props,{className:"_1oxk",onKeyDown:this.onKeyDown}),this.props.children,b("React").createElement("div",{className:"_41nt"+(this.props.isDarkBackground?" _3_jc":"")+(this.props.semiTransparentBackground?" _6la8":"")+(this.props.noBackground?" hidden_elem":""),style:{height:this.props.height}})),this.layer.getContentRoot(),function(){this.layer&&this.layer.conditionShow(this.props.shown),this.props.onLayerRender&&this.props.onLayerRender()}.bind(this))};a.prototype.render=function(){"use strict";return b("React").createElement("div",{className:"_2r6l accessible_elem",ref:"root"})};a.propTypes={shown:c.bool,isScreenReader:c.bool,onLayerRender:c.func};e.exports=a}),null);
__d("UFIReactionsMenuImpl.react",["cx","fbt","Event","React","ReactDOM","RTLKeys","SubscriptionsHandler","UFIConfig","UFIReactionIconImpl.react","UFIReactionsDialogLayerImpl.react","UFIReactionTypes","addFocusEvents","getVendorPrefixedName","joinClasses","shallowCompare"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=8,k=96,l=48,m=44,n=39,o=b("UFIReactionTypes").reactions;b("getVendorPrefixedName")("transform");var p=h._("Reactions"),q=b("addFocusEvents")("span");c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(a,c){"use strict";__p&&__p();i.constructor.call(this);this.focusSelected=function(){var a=b("ReactDOM").findDOMNode(this.refs[this.state.selectedIndex]);a&&a.focus()}.bind(this);this.onLayerRender=function(){this.state.hasKeyboardFocus&&this.focusSelected()}.bind(this);this.onKeyDown=function(event){switch(event.keyCode){case b("RTLKeys").RETURN:event.preventDefault();var a=this.state.supportedReactions[this.state.selectedIndex];this.props.initialReaction===a&&(a=b("UFIReactionTypes").NONE);a!==null&&a!==undefined&&this.props.onReactionClick&&this.props.onReactionClick(a,event);break;case b("RTLKeys").getLeft():case b("RTLKeys").getRight():event.preventDefault();this.setState({selectedIndex:Math.max(0,Math.min(this.state.selectedIndex+(event.keyCode===b("RTLKeys").getLeft()?-1:1),this.state.supportedReactions.length-1))},this.focusSelected);break}}.bind(this);this.setAnimatingDock=function(a){this.setState({isAnimatingDock:a})}.bind(this);c=a.supportedReactions.filter(function(a){return o[a]});var d=a.allowKeyboardFocus?Math.max(0,c.indexOf(a.initialReaction)):-1;this.state={hasKeyboardFocus:a.allowKeyboardFocus,isAnimatingDock:!1,prevPropsShown:a.shown,shouldRenderMenu:a.shown,selectedIndex:d,supportedReactions:c};this.hasAnimatedIcons=b("UFIConfig").reactionsHasAnimatedIcons;this.animatedIconsUsePackage=b("UFIConfig").reactionsAnimatedIconsUsePackage||!1}a.getDerivedStateFromProps=function(a,b){"use strict";if(!b.shouldRenderMenu&&a.shown)return{shouldRenderMenu:!0,prevPropsShown:a.shown,supportedReactions:a.supportedReactions.filter(function(a){return o[a]})};return!a.shown&&b.prevPropsShown?{hasKeyboardFocus:a.allowKeyboardFocus,selectedIndex:-1,prevPropsShown:a.shown,supportedReactions:a.supportedReactions.filter(function(a){return o[a]})}:{supportedReactions:a.supportedReactions.filter(function(a){return o[a]}),prevPropsShown:a.shown}};a.prototype.componentDidMount=function(){"use strict";this.props.allowKeyboardFocus&&this.focusSelected()};a.prototype.componentDidUpdate=function(a,c){"use strict";__p&&__p();this.props.allowKeyboardFocus&&!a.allowKeyboardFocus&&this.focusSelected();if(this.props.isLongPressing&&!a.isLongPressing){var d,e=new(b("SubscriptionsHandler"))();e.addSubscriptions(b("Event").listen(document.documentElement,"touchmove",function(event){event.preventDefault();var a=event.touches[0];a=document.elementFromPoint(a.clientX,a.clientY);!a.getAttribute("data-reaction")&&a.parentElement&&(a=a.parentElement);a=parseInt(a.getAttribute("data-reaction"),10)||null;a!==d&&(d&&this.onReactionMouseLeave(d,event),a&&this.onReactionMouseEnter(a,event),d=a)}.bind(this)),b("Event").listen(document.documentElement,"touchcancel",function(event){e&&(e.release(),e=null)}),b("Event").listen(document.documentElement,"touchend",function(event){e&&(e.release(),e=null),d&&this.onReactionClick(d,event)}.bind(this)))}};a.prototype.shouldComponentUpdate=function(a,c){"use strict";return b("shallowCompare")(this,a,c)};a.prototype.onDragStart=function(event){"use strict";event.preventDefault()};a.prototype.onKeyboardFocus=function(a,event){"use strict";this.setState({hasKeyboardFocus:!0,selectedIndex:a}),this.props.onFocus&&this.props.onFocus(event)};a.prototype.onReactionClick=function(a,event,b,c){b===void 0;c===void 0;event.preventDefault();if(!this.state.isAnimatingDock){var d;this.props.onReactionClick&&(d=this.props).onReactionClick.apply(d,arguments)}};a.prototype.onReactionMouseEnter=function(a,event){"use strict";this.setState({selectedIndex:this.props.supportedReactions.indexOf(a)}),this.props.onReactionMouseEnter&&this.props.onReactionMouseEnter(a)};a.prototype.onReactionMouseLeave=function(a,event){"use strict";this.setState({selectedIndex:-1}),this.props.onReactionMouseLeave&&this.props.onReactionMouseLeave(a)};a.prototype.render=function(){"use strict";__p&&__p();var a=this.state.supportedReactions.length;(a*l-k)/(a-1);var c=this.state.selectedIndex;a=this.state.supportedReactions.map(function(a,d){var e=o[a].display_name,f=this.onReactionClick.bind(this,a),g=Math.max(0,this.state.supportedReactions.indexOf(this.props.initialReaction))===d,h=this.props.icon,i=this.hasAnimatedIcons&&h&&h.supportsReaction&&h.supportsReaction(a);if(i){c===d;var j=this.props.allowAnimationPlayback&&this.props.shown;h=b("React").createElement(h,{animate:j,className:"_1ef0",selectedIndex:this.state.selectedIndex,maxSize:n,reactionID:a,usePackage:this.animatedIconsUsePackage})}else h=b("React").createElement(b("UFIReactionIconImpl.react"),{className:"_2jry",reaction:a,size:"48"});return b("React").createElement(q,{"aria-pressed":this.props.initialReaction===a,"aria-label":e,className:"_iuw"+(c===d?" _iuy":""),"data-testid":"reaction_"+(this.state.isAnimatingDock?"animating_":"")+a,href:"#",key:"reaction_"+a,onClick:f,onDragStart:this.onDragStart,onKeyboardFocus:this.onKeyboardFocus.bind(this,d),onMouseUp:this.props.onReactionMouseUp,onMouseDown:this.props.onReactionMouseDown,onMouseEnter:this.onReactionMouseEnter.bind(this,a),onMouseLeave:this.onReactionMouseLeave.bind(this,a),onTouchStart:this.onDragStart,onTouchEnd:f,ref:d,role:"button",tabIndex:g&&(!this.props.shown||c===d)?0:-1},b("React").createElement("div",{className:"_39m"+(i?" _1ef2":""),"data-reaction":a},b("React").createElement("div",{className:"_39n"},h,b("React").createElement("div",{className:"_d6l"},b("React").createElement("div",{className:"_4sm1"},e)))))}.bind(this));return!this.state.shouldRenderMenu?null:b("React").createElement(b("UFIReactionsDialogLayerImpl.react"),{height:m+j,setAnimatingDock:this.setAnimatingDock,isDarkBackground:this.props.isDarkBackground,isScreenReader:this.props.isScreenReader,onLayerBlur:this.props.onBlur,onLayerRender:this.onLayerRender,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,noBackground:this.props.noBackground,semiTransparentBackground:this.props.semiTransparentBackground,shown:this.props.shown},b("React").createElement("div",{className:b("joinClasses")("_iu-"+(this.state.hasKeyboardFocus?" _5wkt":"")+" _628b",this.props.className),"data-testid":"UFIReactionsMenu"+(this.state.isAnimatingDock?"_animating":""),onKeyDown:this.onKeyDown,"aria-label":p,ref:"root",role:"toolbar"},a))};e.exports=a}),null);